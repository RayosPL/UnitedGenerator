@page "/data"
@using UnitedGenerator.Data;

<PageTitle>United Generator Data Review</PageTitle>

@foreach (var season in DataFactory.Seasons.OrderBy(x => x.Number))
{
    <h1>Season @season.Number - @season.Name</h1>

    @foreach(var box in season.Boxes.OrderBy(x => x.Name))
    {
        <h2>@box.Name</h2>

        @if (box.Heroes.Any())
        {
            <h3>Heroes</h3>
            <ul>
                @foreach (var hero in box.Heroes.OrderBy(x => x.Name))
                {
                    <li>@hero.Name</li>
                }
            </ul>
        }

        @if (box.Villains.Any())
        {
            <h3>Villains</h3>
            <ul>
                @foreach (var villain in box.Villains.OrderBy(x => x.IsVillainTeam).ThenBy(x => x.Name))
                {
                    <li>
                        @villain.Name

                        <ul>

                        @if (!villain.CanBeVillainInTeamVsTeamMode)
                        {
                            <li>Can NOT be villian in Team vs Team games</li>
                        }

                        @if (villain.DisableChallenges)
                        {
                            <li>No Challenges Allowed!</li>
                        }

                        @if (!villain.IncludeInRandomVillainSelection)
                        {
                            <li>Exclude from individual Villain selection!</li>
                        }

                        @if (villain.PreGamesCount > 0)
                        {
                            <li>Number of pre-games: @villain.PreGamesCount</li>
                        }

                        @if (villain.ReuseHeroesFromFirstPreGame)
                        {
                            <li>Re-use Heroes across all games</li>
                        }

                        @if (villain.OnlyPlayPreGames)
                        {
                            <li>Only play the pre-games (This record is not an actual villain!)</li>
                        }

                        @if (villain.PreGameCandidateVillains.Any())
                        {
                            <li>
                                Pre-game Candidate Villains
                                <ul>
                                @foreach(var sub in villain.PreGameCandidateVillains)
                                {
                                    <li>@sub.Name (@sub.Box.Name - Season @sub.Season.Number)</li>
                                }
                                </ul>
                            </li>
                        }

                        @if(villain.AdditionalHeroGroups.Any())
                        {
                            <li>
                                Additional Hero Groups
                                <ul>
                                @foreach(var group in villain.AdditionalHeroGroups)
                                {
                                    <li>@group.GroupName (@group.Description)</li>
                                }
                                </ul>
                             </li>
                        }

                        @if(villain.SubVillains.Any())
                        {
                            <li>
                                Villain team members
                                <ul>
                                @foreach(var sub in villain.SubVillains)
                                {
                                    <li>@sub.Name (@sub.Box.Name - Season @sub.Season.Number)</li>
                                }
                                </ul>
                            </li>
                        }

                        @if(villain.AssignedLocations.Any())
                        {
                            <li>
                                Assigned locations
                                <ul>
                                @foreach(var assigned in villain.AssignedLocations)
                                {
                                    <li>
                                        @assigned.Location.Name 
                                        @(assigned.Placement.HasValue ? $"[Placement {assigned.Placement}]" : "[Anywhere]")
                                        (@assigned.Location.Box.Name - Season @assigned.Location.Season.Number)
                                    </li>
                                }
                                </ul>
                            </li>
                        }

                        @if (villain.ExcludeHeroes.Any())
                        {
                            <li>
                                Excluded Heroes
                                <ul>
                                    @foreach (var sub in villain.ExcludeHeroes)
                                    {
                                        <li>@sub.Name (@sub.Box.Name - Season @sub.Season.Number)</li>
                                    }
                                </ul>
                            </li>
                        }

                        @if(villain.DataComments.Any())
                        {
                            <li>
                                Comments
                                <ul>
                                @foreach(var comment in villain.DataComments)
                                {
                                     <li>@comment</li>   
                                }
                                </ul>
                            </li>
                        }

                        </ul>

                    </li>
                }
            </ul>
        }

        @if (box.AntiHeroes.Any())
        {
            <h3>Anti-Heroes</h3>
            <ul>
                @foreach (var villain in box.AntiHeroes.OrderBy(x => x.Name))
                {
                    <li>
                        @villain.Name

                        <ul>

                            @if (!villain.CanBeVillainInTeamVsTeamMode)
                            {
                                <li>Can NOT be villian in Team vs Team games</li>
                            }

                            @if (villain.DisableChallenges)
                            {
                                <li>No Challenges Allowed!</li>
                            }

                            @if (!villain.IncludeInRandomVillainSelection)
                            {
                                <li>Exclude from individual Villain selection!</li>
                            }

                            @if (villain.PreGamesCount > 0)
                            {
                                <li>Number of pre-games: @villain.PreGamesCount</li>
                            }

                            @if (villain.ReuseHeroesFromFirstPreGame)
                            {
                                <li>Re-use Heroes across all games</li>
                            }

                            @if (villain.OnlyPlayPreGames)
                            {
                                <li>Only play the pre-games (This record is not an actual villain!)</li>
                            }

                            @if (villain.PreGameCandidateVillains.Any())
                            {
                                <li>
                                    Pre-game Candidate Villains
                                    <ul>
                                        @foreach (var sub in villain.PreGameCandidateVillains)
                                        {
                                            <li>@sub.Name (@sub.Box.Name - Season @sub.Season.Number)</li>
                                        }
                                    </ul>
                                </li>
                            }

                            @if (villain.AdditionalHeroGroups.Any())
                            {
                                <li>
                                    Additional Hero Groups
                                    <ul>
                                        @foreach (var group in villain.AdditionalHeroGroups)
                                        {
                                            <li>@group.GroupName (@group.Description)</li>
                                        }
                                    </ul>
                                </li>
                            }

                            @if (villain.SubVillains.Any())
                            {
                                <li>
                                    Villain team members
                                    <ul>
                                        @foreach (var sub in villain.SubVillains)
                                        {
                                            <li>@sub.Name (@sub.Box.Name - Season @sub.Season.Number)</li>
                                        }
                                    </ul>
                                </li>
                            }

                            @if (villain.AssignedLocations.Any())
                            {
                                <li>
                                    Assigned locations
                                    <ul>
                                        @foreach (var assigned in villain.AssignedLocations)
                                        {
                                            <li>
                                                @assigned.Location.Name
                                                @(assigned.Placement.HasValue ? $"[Placement {assigned.Placement}]" : "[Anywhere]")
                                                (@assigned.Location.Box.Name - Season @assigned.Location.Season.Number)
                                            </li>
                                        }
                                    </ul>
                                </li>
                            }

                            @if (villain.ExcludeHeroes.Any())
                            {
                                <li>
                                    Excluded Heroes
                                    <ul>
                                        @foreach (var sub in villain.ExcludeHeroes)
                                        {
                                            <li>@sub.Name (@sub.Box.Name - Season @sub.Season.Number)</li>
                                        }
                                    </ul>
                                </li>
                            }

                            @if(villain.DataComments.Any())
                            {
                                <li>
                                    Comments
                                    <ul>
                                    @foreach(var comment in villain.DataComments)
                                    {
                                         <li>@comment</li>   
                                    }
                                    </ul>
                                </li>
                            }

                        </ul>

                    </li>
                }
            </ul>
        }

        if (box.Teams.Any())
        {
            <h3>Teams</h3>
            <ul>
                @foreach(var team in box.Teams)
                {
                    <li>
                        @team.Name
                        <ul>
                            <li>Type: @team.TeamType</li>
                            <li>Members
                                <ul>
                                    @foreach(var member in team.TeamMembers)
                                    {
                                        <li>@member.Name (@member.Box.Name - Season @member.Season.Number)</li>
                                    }
                                </ul>
                            </li>
                        </ul>
                    </li>
                }
            </ul>
        }

        if (box.Locations.Any())
        {
            <h3>Locations</h3>
            <ul>
                @foreach (var location in box.Locations.OrderBy(x => x.Name))
                {
                    <li>
                        @location.Name
                        <ul>
                        @if (!location.IncludeInRandomSelection)
                        {
                            <li>Exclude from random selection!</li>
                        }

                        @if (location.HasCustomRules)
                        {
                            <li>Has additional rules in rulebook</li>
                        }

                        @if (location.Hazardous)
                        {
                            <li>Hazardous!</li>
                        }
                        </ul>
                    </li>
                }
            </ul>
        }

        if (box.Challenges.Any())
        {
            <h3>Challenges</h3>
            <ul>
                @foreach (var challenge in box.Challenges.OrderBy(x => x.Name))
                {
                    <li>
                        @challenge.Name
                        <ul>
                            @if(challenge.HazardousLocationsCount > 0)
                            {
                                <li>Hazardous Locations: @challenge.HazardousLocationsCount</li>
                            }

                            @if(!challenge.CanBeUsedInTeamVsTeamMode)
                            {
                                <li>Can NOT be used in Team vs Team games</li>
                            }

                            @if(challenge.RequiresTeamvsTeamMode)
                            {
                                <li>Can ONLY be used in Team vs Team games</li>
                            }

                        @if (challenge.IncompatibleVillains.Any())
                        {
                            <li>
                                Incompatible Villains

                                <ul>
                                    @foreach(var villain in challenge.IncompatibleVillains)
                                    {
                                        <li>@villain.Name (@villain.Box.Name - Season @villain.Season.Number)</li>
                                    }
                                </ul>
                            </li>
                        }

                        @if (challenge.DataComments.Any())
                        {
                            <li>
                                Comments
                                <ul>
                                @foreach(var comment in challenge.DataComments)
                                {
                                     <li>@comment</li>   
                                }
                                </ul>
                            </li>
                        }
                        </ul>
                    </li>
                }
            </ul>
        }
    }
}
